import{_ as V}from"./http-a024b3f6.js";import{b as k,u as C}from"./index-534a1249.js";import{s as D}from"./index-83de5650.js";import{D as N,r as d,j as O,k as j,e as h,o as r,c as i,d as u,w as x,a as s,t as o,u as B,m as T,F as f,b as q,i as _}from"./index-811e683d.js";const F={class:"h-screen pt-12 bg-sh-gray"},L={class:"bg-white flex flex-col rounded-md py-2 px-4 shadow-sm m-2"},$={class:"text-sm"},E={class:"flex"},G=s("span",{class:"text-gray-600"},"订单状态：",-1),I={class:"flex"},M=s("span",{class:"text-gray-600"},"订单编号：",-1),P={class:"flex"},R=s("span",{class:"text-gray-600"},"下单时间：",-1),U={key:0,class:"mt-2"},z={class:"bg-white flex flex-col rounded-md py-2 px-4 shadow-sm m-2"},A={class:"text-sm mt-4"},H={class:"flex"},J=s("span",{class:"text-gray-600"},"商品金额：",-1),K={class:"flex"},Q=s("span",{class:"text-gray-600"},"配送方式：",-1),W={class:"mt-4"},X=["src","alt"],Y={class:"flex-1 flex flex-col justify-around ml-1"},Z={class:"text-sm"},ss={class:"text-sm text-red-500 font-bold"},es={class:"flex flex-col justify-around"},ts={class:"text-xs text-end text-gray-500"},os=s("small",{class:"text-xs mr-px"},"x",-1),rs={__name:"OrderDetailView",setup(as){const v=N(),e=d({status:0}),m=d([]),c=d(!1),g=d([{name:"支付宝",icon:"qrcode",type:"aliyun"}]),y=O(()=>{switch(e.value.status){case 1:return"待付款";case 2:return"已付款";case 3:return"待收货";case 4:return"已完成";case 5:return"过期";default:return"未知"}});j(()=>{p()});function p(){k(v.query.id).then(n=>{console.log(n),e.value=n,m.value=n.orderDetails.data})}function w(n){e.value.id&&D("支付中...",a=>{C(e.value.id,n.type).then(l=>{console.log(l),a.message="支付成功，跳转中...",setTimeout(()=>{a.close(),c.value=!1,p()},1e3)}).catch(l=>{console.log(l.message)})})}return(n,a)=>{const l=h("van-button"),b=h("van-share-sheet");return r(),i(f,null,[u(V,null,{title:x(()=>[_("订单详情")]),_:1}),s("main",F,[s("section",L,[s("div",$,[s("div",E,[G,s("p",null,o(B(y)),1)]),s("div",I,[M,s("p",null,o(e.value.order_no),1)]),s("div",P,[R,s("p",null,o(e.value.created_at),1)])]),e.value.status===1?(r(),i("div",U,[u(l,{block:"",plain:"",type:"primary",onClick:a[0]||(a[0]=t=>c.value=!0)},{default:x(()=>[_("去支付")]),_:1})])):T("",!0)]),s("section",z,[s("div",A,[s("div",H,[J,s("p",null,"￥"+o(e.value.amount),1)]),s("div",K,[Q,s("p",null,"￥"+o(e.value.amount),1)])]),s("div",W,[(r(!0),i(f,null,q(m.value,(t,S)=>(r(),i("div",{class:"w-full inline-flex p-2 mb-2 rounded-md bg-sh-gray",key:S},[s("img",{class:"w-1/5 py-1 bg-white rounded-md",src:t.goods.cover_url,alt:t.goods.description},null,8,X),s("div",Y,[s("h3",Z,o(t.goods.title),1),s("p",ss,"￥"+o(t.goods.price),1)]),s("div",es,[s("p",ts,[os,_(o(t.num),1)])])]))),128))])]),u(b,{show:c.value,"onUpdate:show":a[1]||(a[1]=t=>c.value=t),title:"请选择支付方式",options:g.value,"cancel-text":"取消支付","close-on-click-overlay":!1,onSelect:w},null,8,["show","options"])])],64)}}};export{rs as default};
